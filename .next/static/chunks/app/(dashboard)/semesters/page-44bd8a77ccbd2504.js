(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{12418:(e,s,r)=>{Promise.resolve().then(r.bind(r,54536)),Promise.resolve().then(r.bind(r,19421))},19421:(e,s,r)=>{"use strict";r.d(s,{SemesterCard:()=>g});var t=r(95155),a=r(12115),l=r(35695),c=r(33168),i=r(88482),d=r(97168),n=r(88145),o=r(67133),m=r(5623),h=r(62525);let u=(0,r(19946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var x=r(5040),j=r(6874),f=r.n(j),p=r(74611),N=r(56671);function g(e){let{semester:s}=e,[r,j]=(0,a.useState)(!1),g=(0,l.useRouter)(),y=function(e){if(0===e.length)return 0;let s=e.reduce((e,s)=>e+s.gpa*s.credit_hours,0),r=e.reduce((e,s)=>e+s.credit_hours,0);return r>0?s/r:0}(s.courses),v=s.courses.reduce((e,s)=>e+s.credit_hours,0),w=async()=>{if(confirm("Are you sure you want to delete this semester? This will also delete all courses in it.")){j(!0);try{let{error:e}=await c.N.from("semesters").delete().eq("id",s.id);if(e)throw e;N.oR.success("Semester deleted successfully!"),g.refresh()}catch(e){N.oR.error("Failed to delete semester"),console.error(e)}finally{j(!1)}}};return(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ZB,{className:"text-lg",children:s.name}),(0,t.jsxs)(i.BT,{children:[s.courses.length," courses â€¢ ",v," credits"]})]}),(0,t.jsxs)(o.rI,{children:[(0,t.jsx)(o.ty,{asChild:!0,children:(0,t.jsx)(d.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})}),(0,t.jsx)(o.SQ,{align:"end",children:(0,t.jsxs)(o._2,{onClick:w,disabled:r,children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Delete Semester"]})})]})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"SGPA"})]}),(0,t.jsx)(n.E,{variant:y>=3.5?"default":y>=3?"secondary":"destructive",children:y.toFixed(2)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[0===s.courses.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No courses added yet"}):s.courses.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[e.credit_hours,"cr"]}),(0,t.jsx)(n.E,{variant:"outline",children:e.gpa.toFixed(1)})]})]},e.id)),s.courses.length>3&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["+",s.courses.length-3," more courses"]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(p.AddCourseDialog,{semesterId:s.id}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",asChild:!0,className:"flex-1",children:(0,t.jsxs)(f(),{href:"/semesters/".concat(s.id),children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})]})]})}},54536:(e,s,r)=>{"use strict";r.d(s,{AddSemesterDialog:()=>x});var t=r(95155),a=r(12115),l=r(35695),c=r(61976),i=r(33168),d=r(97168),n=r(99840),o=r(89852),m=r(82714),h=r(84616),u=r(56671);function x(){let[e,s]=(0,a.useState)(!1),[r,x]=(0,a.useState)(""),[j,f]=(0,a.useState)(!1),{user:p}=(0,c.Jd)(),N=(0,l.useRouter)(),g=async e=>{if(e.preventDefault(),p&&r.trim()){f(!0);try{let{error:e}=await i.N.from("semesters").insert([{user_id:p.id,name:r.trim()}]);if(e)throw e;u.oR.success("Semester added successfully!"),x(""),s(!1),N.refresh()}catch(e){u.oR.error("Failed to add semester"),console.error(e)}finally{f(!1)}}};return(0,t.jsxs)(n.lG,{open:e,onOpenChange:s,children:[(0,t.jsx)(n.zM,{asChild:!0,children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Add Semester"]})}),(0,t.jsx)(n.Cf,{className:"sm:max-w-[425px]",children:(0,t.jsxs)("form",{onSubmit:g,children:[(0,t.jsxs)(n.c7,{children:[(0,t.jsx)(n.L3,{children:"Add New Semester"}),(0,t.jsx)(n.rr,{children:"Create a new semester to track your courses and GPA."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(m.J,{htmlFor:"name",className:"text-right",children:"Name"}),(0,t.jsx)(o.p,{id:"name",value:r,onChange:e=>x(e.target.value),placeholder:"e.g., Fall 2024",className:"col-span-3",required:!0})]})}),(0,t.jsx)(n.Es,{children:(0,t.jsx)(d.$,{type:"submit",disabled:j,children:j?"Adding...":"Add Semester"})})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[90,274,671,498,50,441,684,358],()=>s(12418)),_N_E=e.O()}]);